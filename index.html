<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>AR.js Two Custom Pattern Markers</title>
  <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
  <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
  <style>
    .overlay {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0,0,0,0.8);
      color: #fff;
      padding: 10px 15px;
      border-radius: 8px;
      font-family: 'Courier New', monospace;
      font-size: 12px;
      z-index: 1000;
    }
  </style>
</head>
<body style="margin: 0; overflow: hidden;">

  <div id="distanceOverlay" class="overlay">
    Distance: <span id="distValue">--</span> m
  </div>

  <a-scene
    embedded
    arjs="sourceType: webcam; debugUIEnabled: false;"
    renderer="logarithmicDepthBuffer: true;"
  >
    <!-- CUSTOM PNG Marker 1 -->
    <a-marker id="markerCustom1" type="pattern" url="pattern-marker1.patt" emitevents="true">
      <a-sphere position="0 0.5 0" color="#00FF00"></a-sphere>
    </a-marker>

    <!-- CUSTOM PNG Marker 2 -->
    <a-marker id="markerCustom2" type="pattern" url="pattern-marker2.patt" emitevents="true">
      <a-cylinder position="0 0.5 0" color="#FFA500"></a-cylinder>
    </a-marker>

    <a-entity camera></a-entity>
  </a-scene>

  <script>
    const markers = {
      custom1: document.getElementById('markerCustom1'),
      custom2: document.getElementById('markerCustom2')
    };

    const distSpan = document.getElementById('distValue');

    const visibility = { custom1: false, custom2: false };

    // Add event listeners to both markers
    for (const [name, marker] of Object.entries(markers)) {
      marker.addEventListener('markerFound', () => { visibility[name] = true; });
      marker.addEventListener('markerLost', () => { visibility[name] = false; });
    }

    function getDistance(m1, m2) {
      const p1 = m1.object3D.position;
      const p2 = m2.object3D.position;
      const dx = p1.x - p2.x;
      const dy = p1.y - p2.y;
      const dz = p1.z - p2.z;
      return Math.sqrt(dx*dx + dy*dy + dz*dz);
    }

    function updateDistance() {
      // Distance between Custom1 and Custom2 markers
      if (visibility.custom1 && visibility.custom2) {
        const dist = getDistance(markers.custom1, markers.custom2);
        distSpan.textContent = dist.toFixed(3);
      } else {
        distSpan.textContent = "--";
      }
    }

    setInterval(updateDistance, 100);
  </script>
</body>
</html>
